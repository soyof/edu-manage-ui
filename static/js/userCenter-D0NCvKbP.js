import{y as e,r as a,c as l,j as s,z as t,B as o,R as r,al as u,J as i,O as d,P as n,u as c,I as p,L as v,aE as m,A as f,l as g,h,Q as b,a6 as w,a4 as y,n as _,X as C,E as I,D as P}from"./vue-BMnUnhjY.js";import{u as V,s as k}from"./index-BT6KgQx3.js";import{e as U,a4 as x,E as H,A,a8 as S,S as F,q as z,C as E}from"./elementPlus-iRxZk2_b.js";import{C as L,I as D}from"./idPhotoUploader-0x0eQTj2.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{u as R}from"./useDictionary-Cg9QFWfd.js";import{u as T}from"./useLoading-D-rekEU2.js";import{A as B}from"./academicFormEditor-XXmt-AKx.js";import{e as O}from"./pwdUtils-tpakkPSj.js";import"./tinyMceEditor-EOAlt4H2.js";const q={class:"avatar-uploader-component"},N={class:"avatar-container"},W={class:"avatar-upload-container"},M={key:0,class:"upload-box"},$={key:1},J={class:"dialog-footer"},K=j(e({__name:"avatarUploader",props:{avatar:{type:String,default:""},userId:{type:String,required:!0},username:{type:String,default:""},size:{type:Number,default:100},cropWidth:{type:Number,default:400},cropHeight:{type:Number,default:400},bgColor:{type:String,default:"#909399"}},emits:["update:avatar","uploadSuccess"],setup(e,{emit:g}){m(e=>({"36fdc4a2":h.bgColor}));const h=e,b=g,w=V(),y=a("jpeg"),_=a(!1),C=a(!1),I=a(""),P=a(""),A=a(!1),S=l(()=>h.avatar?`/api/previewAvatar?filename=${h.avatar}&userId=${h.userId}`:"");s(()=>I.value,e=>{C.value=!!e});const F=l(()=>h.username?.charAt(0).toUpperCase()||""),z=()=>{_.value=!0},E=e=>{if(!e)return;const a=-1!==e.raw.type.indexOf("image/"),l=e.raw.size/1024/1024<2;if(!a)return void H.error("只能上传图片文件!");if(!l)return void H.error("图片大小不能超过 2MB!");const s=new FileReader;s.onload=e=>{I.value=e.target?.result},s.readAsDataURL(e.raw)},D=e=>{P.value=e.url},j=()=>{I.value="",P.value="",C.value=!1},R=()=>{j()},T=()=>{_.value=!1,j()},B=()=>{j()},O=()=>{C.value=!1},K=()=>{C.value=!0},G=async e=>{A.value=!0;try{const a=new FormData;a.append("userId",h.userId),a.append("avatar",e.file);const l=await k.upload("/api/uploadAvatar",a);if(l){H.success("头像上传成功");const a=l.avatarUrl||e.url;w.updateAvatar(a),b("update:avatar",a),b("uploadSuccess",a),_.value=!1,j()}}catch(a){H.error("头像上传失败")}finally{A.value=!1}};return(a,l)=>{const s=u("el-avatar"),m=u("el-icon"),g=u("el-upload"),h=u("el-button"),b=u("el-dialog");return f(),t("div",q,[o("div",N,[r(s,{size:e.size,src:S.value,fit:"cover",class:"profile-avatar",onClick:z},{default:i(()=>[d(n(F.value),1)]),_:1},8,["size","src"]),o("div",{class:"avatar-edit-mask",onClick:z},[r(m,null,{default:i(()=>[r(c(U))]),_:1}),l[2]||(l[2]=o("span",null,"点击修改头像",-1))])]),r(b,{modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value=e),title:"上传头像",width:"520px",draggable:"",closeOnClickModal:!1,closeOnPressEscape:!1,destroyOnClose:!0,onClose:R},{footer:i(()=>[o("span",J,[r(h,{onClick:T},{default:i(()=>[...l[4]||(l[4]=[d("取 消",-1)])]),_:1}),I.value?(f(),p(h,{key:0,onClick:B},{default:i(()=>[...l[5]||(l[5]=[d("重新上传",-1)])]),_:1})):v("",!0),I.value?(f(),p(h,{key:1,type:"primary",loading:A.value,onClick:K},{default:i(()=>[...l[6]||(l[6]=[d(" 确 认 ",-1)])]),_:1},8,["loading"])):v("",!0)])]),default:i(()=>[o("div",W,[I.value?(f(),t("div",$,[r(L,{visible:C.value,"onUpdate:visible":l[0]||(l[0]=e=>C.value=e),title:"裁剪头像",imageUrl:I.value,outputSize:.8,outputType:y.value,showFull:!0,canScale:!0,fixed:!1,autoCropWidth:e.cropWidth,autoCropHeight:e.cropHeight,showPreview:!0,previewCircle:!0,showReupload:!0,loading:A.value,onConfirm:G,onCancel:O,onReupload:B,onPreview:D},null,8,["visible","imageUrl","outputType","autoCropWidth","autoCropHeight","loading"])])):(f(),t("div",M,[r(g,{class:"avatar-uploader",action:"#",autoUpload:!1,showFileList:!1,onChange:E,accept:"image/*"},{default:i(()=>[r(m,{class:"avatar-uploader-icon"},{default:i(()=>[r(c(x))]),_:1}),l[3]||(l[3]=o("div",{class:"upload-text"},"点击上传头像",-1))]),_:1})]))])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-6bc53ee0"]]),G={class:"user-profile"},Q={class:"profile-section"},X={class:"profile-header"},Z={class:"avatar-container"},Y={class:"profile-info"},ee={class:"name-section"},ae={class:"profile-role"},le={class:"tags-container"},se={class:"tags-list"},te={class:"form-buttons"},oe=j(e({__name:"modifyUserBaseInfo",setup(e,{expose:s}){const{loading:m,changeLoading:C}=T({target:".user-info-card"}),I=V(),{dictList:P}=R({dictType:"user_title",autoLoad:!0}),x=a(!1),A=a(!0),S=a(),F=a(!1),z=a(""),E=a(),L=a(!1),j=a(-1),B=a(""),O=a(),q=l(()=>de.tags.map((e,a)=>({tag:e,index:a,isEditing:L.value&&j.value===a})).filter(e=>!e.isEditing)),N=l(()=>A.value?"plain":"light"),W=e=>{const a=["primary","success","warning","info","danger"];return a[e%a.length]},M=()=>{B.value&&(de.tags[j.value]=B.value),L.value=!1,j.value=-1},$=()=>{z.value&&(de.tags.includes(z.value)?H.warning("标签已存在"):de.tags.push(z.value)),F.value=!1,z.value=""},J=e=>{de.idPic=e},oe=e=>{},re=["#67C23A","#E6A23C","#F56C6C","#909399","#8E44AD","#16A085","#D35400","#27AE60"],ue=l(()=>{const e=ie.value.username||"--";let a=0;for(let s=0;s<e.length;s++)a+=e.charCodeAt(s);const l=Math.abs(a)%re.length;return re[l]}),ie=l(()=>{const e=I.userInfo||{};return{id:e.id||"",userId:e.userId||"",username:e.username||"",email:e.email||"",phone:e.phone||"",title:e.title||"",roleName:e.role||"user",avatar:e.avatar||"",labHomepage:e.labHomepage||"",personalHomepage:e.personalHomepage||"",tags:e.tags||[],idPic:e.idPic||""}}),de=g({userId:"",username:"",email:"",phone:"",title:"",labHomepage:"",personalHomepage:"",tags:[],idPic:""}),ne={userId:[{required:!0,message:"请输入用户编号",trigger:"blur"}],username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{pattern:/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],labHomepage:[{type:"url",message:"请输入正确的网址",trigger:"blur"}],personalHomepage:[{type:"url",message:"请输入正确的网址",trigger:"blur"}]};h(()=>{ce()});const ce=()=>{de.userId=ie.value.userId,de.username=ie.value.username,de.email=ie.value.email,de.phone=ie.value.phone,de.title=ie.value.title,de.labHomepage=ie.value.labHomepage,de.personalHomepage=ie.value.personalHomepage,de.idPic=ie.value.idPic||"","string"==typeof ie.value.tags?de.tags=ie.value.tags.split(",").filter(Boolean):Array.isArray(ie.value.tags)?de.tags=[...ie.value.tags]:de.tags=[]},pe=()=>{x.value=!0,A.value=!1},ve=()=>{x.value=!1,A.value=!0,ce(),S.value?.clearValidate()},me=()=>{ve()},fe=()=>{S.value&&S.value.validate(e=>{if(e){C(!0,{text:"保存中..."});const e={...de,tags:Array.isArray(de.tags)?de.tags:[]};k.post("/api/updateProfile",e).then(async()=>{H.success("更新成功"),await I.getUserInfoAction(),x.value=!1,A.value=!0}).finally(()=>{C(!1)})}})};return s({saveUserInfo:fe,cancelEditing:ve,startEditing:()=>{x.value=!0,A.value=!1}}),(e,a)=>{const l=u("el-icon"),s=u("el-button"),g=u("el-tag"),h=u("el-divider"),C=u("el-input"),I=u("el-form-item"),V=u("el-option"),k=u("el-select"),x=u("el-form");return f(),t("div",G,[o("div",Q,[o("div",X,[o("div",Z,[r(K,{avatar:ie.value.avatar,userId:ie.value.userId,username:ie.value.username,bgColor:ue.value},null,8,["avatar","userId","username","bgColor"])]),o("div",Y,[o("div",ee,[o("h2",null,n(ie.value.username),1),A.value?(f(),p(s,{key:0,type:"primary",size:"small",class:"edit-btn",onClick:pe},{default:i(()=>[r(l,{class:"edit-icon"},{default:i(()=>[r(c(U))]),_:1}),a[11]||(a[11]=d(" 编辑资料 ",-1))]),_:1})):v("",!0)]),o("div",ae,[r(g,null,{default:i(()=>[d(n("admin"===ie.value.roleName?"管理员":"普通用户"),1)]),_:1})])])])]),r(h),r(x,{ref_key:"formRef",ref:S,model:de,rules:ne,labelWidth:"100px",statusIcon:""},{default:i(()=>[r(I,{label:"用户编号",prop:"userId"},{default:i(()=>[r(C,{modelValue:de.userId,"onUpdate:modelValue":a[0]||(a[0]=e=>de.userId=e),placeholder:"请输入用户编号（英文+数字或纯英文）",disabled:""},null,8,["modelValue"])]),_:1}),r(I,{label:"用户名称",prop:"username"},{default:i(()=>[r(C,{modelValue:de.username,"onUpdate:modelValue":a[1]||(a[1]=e=>de.username=e),placeholder:"请输入用户名称",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),r(I,{label:"邮箱地址",prop:"email"},{default:i(()=>[r(C,{modelValue:de.email,"onUpdate:modelValue":a[2]||(a[2]=e=>de.email=e),placeholder:"请输入邮箱地址",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),r(I,{label:"手机号码",prop:"phone"},{default:i(()=>[r(C,{modelValue:de.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>de.phone=e),placeholder:"请输入手机号码",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),r(I,{label:"职称",prop:"title"},{default:i(()=>[r(k,{modelValue:de.title,"onUpdate:modelValue":a[4]||(a[4]=e=>de.title=e),filterable:"",clearable:"",placeholder:"请选择职称",disabled:A.value},{default:i(()=>[(f(!0),t(b,null,w(c(P),e=>(f(),p(V,{key:e.dictId,label:e.dictValue,value:e.dictId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),r(I,{label:"实验室主页",prop:"labHomepage"},{default:i(()=>[r(C,{modelValue:de.labHomepage,"onUpdate:modelValue":a[5]||(a[5]=e=>de.labHomepage=e),placeholder:"请输入实验室主页URL",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),r(I,{label:"个人主页",prop:"personalHomepage"},{default:i(()=>[r(C,{modelValue:de.personalHomepage,"onUpdate:modelValue":a[6]||(a[6]=e=>de.personalHomepage=e),placeholder:"请输入个人主页URL",disabled:A.value},null,8,["modelValue","disabled"])]),_:1}),r(I,{label:"用户标签",prop:"tags"},{default:i(()=>[o("div",le,[o("div",se,[(f(!0),t(b,null,w(q.value,e=>(f(),p(g,{key:e.index,closable:!A.value,effect:N.value,type:W(e.index),disableTransitions:!1,class:"tag-item",onClick:a=>{return l=e.index,s=e.tag,void(A.value||(L.value=!0,j.value=l,B.value=s,_(()=>{O.value?.focus()})));var l,s},onClose:a=>{return l=e.tag,void de.tags.splice(de.tags.indexOf(l),1);var l}},{default:i(()=>[d(n(e.tag),1)]),_:2},1032,["closable","effect","type","onClick","onClose"]))),128)),L.value&&-1!==j.value?(f(),p(C,{key:0,ref_key:"tagInputRef",ref:O,modelValue:B.value,"onUpdate:modelValue":a[7]||(a[7]=e=>B.value=e),size:"small",class:"tag-input",onKeyup:y(M,["enter"]),onBlur:M},null,8,["modelValue"])):v("",!0),F.value&&!A.value?(f(),p(C,{key:1,ref_key:"newTagInputRef",ref:E,modelValue:z.value,"onUpdate:modelValue":a[8]||(a[8]=e=>z.value=e),size:"small",class:"tag-input",placeholder:"请输入标签名称",onKeyup:y($,["enter"]),onBlur:$},null,8,["modelValue"])):v("",!0),F.value||A.value?v("",!0):(f(),p(s,{key:2,class:"button-new-tag",size:"small",onClick:a[9]||(a[9]=e=>F.value=!0)},{default:i(()=>[...a[12]||(a[12]=[d(" + 新增标签 ",-1)])]),_:1}))])])]),_:1}),r(I,{label:"证件照",prop:"idPic"},{default:i(()=>[r(D,{modelValue:de.idPic,"onUpdate:modelValue":a[10]||(a[10]=e=>de.idPic=e),userId:de.userId,disabled:A.value,onUploadSuccess:J,onUploadError:oe},null,8,["modelValue","userId","disabled"])]),_:1}),A.value?v("",!0):(f(),p(I,{key:0},{default:i(()=>[o("div",te,[r(s,{type:"primary",loading:c(m),onClick:fe},{default:i(()=>[...a[13]||(a[13]=[d("保存",-1)])]),_:1},8,["loading"]),r(s,{onClick:me},{default:i(()=>[...a[14]||(a[14]=[d("取消",-1)])]),_:1})])]),_:1}))]),_:1},8,["model"])])}}}),[["__scopeId","data-v-77e5cc9b"]]),re={class:"other-user-info"},ue={class:"fixed-action-buttons"},ie={class:"button-group collapse-controls"},de={class:"button-group edit-controls"},ne=j(e({__name:"otherUserInfo",setup(e){const s=V(),n=a(!1),v=a(!0),{loading:m,changeLoading:g,closeLoading:w}=T({target:".user-info-card"}),y=a(),_=a({});C(()=>{w()});const I=l(()=>{const e=s.userInfo||{};return{id:e.id||"",userId:e.userId||"",otherInfo:e.otherInfo||{}}}),P=l(()=>I.value.userId);h(()=>{x()});const x=()=>{g(!0),k.get("/api/getCurrentUserOtherInfo").then(e=>{_.value=e||{}}).finally(()=>{setTimeout(()=>{g(!1)},800)})},E=()=>{n.value=!0,v.value=!1},L=()=>{n.value=!1,v.value=!0,x()},D=()=>{y.value&&!m.value&&y.value.saveForm()},j=e=>{g(!0,{text:"保存中..."}),k.post("/api/updateCurrentUserOtherInfo",e).then(async()=>{n.value=!1,v.value=!0,H.success("保存成功"),x()}).finally(()=>{g(!1)})},R=()=>{L()},O=()=>{y.value&&y.value.expandAllSections()},q=()=>{y.value&&y.value.collapseAllSections()};return(e,a)=>{const l=u("el-icon"),s=u("el-button");return f(),t("div",re,[o("div",ue,[o("div",ie,[r(s,{type:"primary",link:"",size:"small",class:"action-button",onClick:O},{default:i(()=>[r(l,{class:"button-icon"},{default:i(()=>[r(c(A))]),_:1}),a[0]||(a[0]=d("全部展开 ",-1))]),_:1}),a[2]||(a[2]=o("div",{class:"divider"},null,-1)),r(s,{type:"primary",link:"",size:"small",class:"action-button",onClick:q},{default:i(()=>[r(l,{class:"button-icon"},{default:i(()=>[r(c(S))]),_:1}),a[1]||(a[1]=d("全部折叠 ",-1))]),_:1})]),o("div",de,[v.value?(f(),p(s,{key:0,type:"primary",link:"",size:"small",class:"action-button",onClick:E},{default:i(()=>[r(l,{class:"button-icon"},{default:i(()=>[r(c(U))]),_:1}),a[3]||(a[3]=d("编辑资料 ",-1))]),_:1})):(f(),t(b,{key:1},[r(s,{type:"primary",link:"",size:"small",class:"action-button",disabled:c(m),onClick:D},{default:i(()=>[r(l,{class:"button-icon"},{default:i(()=>[r(c(F))]),_:1}),a[4]||(a[4]=d("保存 ",-1))]),_:1},8,["disabled"]),a[6]||(a[6]=o("div",{class:"divider"},null,-1)),r(s,{type:"info",link:"",size:"small",class:"action-button",disabled:c(m),onClick:L},{default:i(()=>[r(l,{class:"button-icon"},{default:i(()=>[r(c(z))]),_:1}),a[5]||(a[5]=d("取消 ",-1))]),_:1},8,["disabled"])],64))])]),r(B,{ref_key:"formEditorRef",ref:y,userId:P.value,initialData:_.value,isDisabled:v.value,showButtons:!1,onSave:j,onCancel:R},null,8,["userId","initialData","isDisabled"])])}}}),[["__scopeId","data-v-14b25eb9"]]),ce={class:"password-change"},pe={key:0,class:"password-strength-indicator"},ve={class:"strength-text"},me={class:"strength-bar-container"},fe={class:"strength-tips"},ge=j(e({__name:"modifyPassword",setup(e){const s=V(),{loading:p,changeLoading:m}=T({target:".password-change"}),h=a(),b=g({oldPassword:"",newPassword:"",confirmPassword:""}),w=g({length:!1,hasUppercase:!1,hasLowercase:!1,hasDigit:!1,hasSpecialChar:!1,hasChinese:!1,hasChineseSymbol:!1}),y=a(0),_=e=>{if(b[e]){const a=b[e].replace(/[\u4e00-\u9fa5]/g,"").replace(/[\u3000-\u303F\uFF00-\uFFEF]/g,"");a!==b[e]&&(b[e]=a,H.warning("密码不能包含中文字符或中文标点符号"))}},C=()=>{_("newPassword"),U()},U=()=>{const e=b.newPassword;let a=0;w.hasUppercase=/[A-Z]/.test(e),w.hasUppercase&&(a+=25),w.hasLowercase=/[a-z]/.test(e),w.hasLowercase&&(a+=25),w.hasDigit=/[0-9]/.test(e),w.hasDigit&&(a+=25),w.hasSpecialChar=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e),w.hasSpecialChar&&(a+=25),w.hasChinese=/[\u4e00-\u9fa5]/.test(e),w.hasChineseSymbol=/[\u3000-\u303F\uFF00-\uFFEF]/.test(e),(w.hasChinese||w.hasChineseSymbol)&&(a=0),y.value=a},x=l(()=>y.value),A=l(()=>0===y.value?"请输入密码":y.value<40?"弱":y.value<70?"中等":"强"),S=l(()=>0===y.value?"":y.value<40?"weak":y.value<70?"medium":"strong"),F={oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,message:"密码长度不能少于8位",trigger:"change"},{max:32,message:"密码长度不能超过32位",trigger:"change"},{validator:(e,a,l)=>{U(),w.hasChinese||w.hasChineseSymbol?l(new Error("密码不能包含中文字符或中文标点符号")):l()},trigger:"change"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==b.newPassword?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}]},z=()=>{h.value&&h.value.validate(e=>{if(e){m(!0,{text:"修改中..."});const e=s.userInfo?.userId;if(!e)return H.error("获取用户信息失败"),void m(!1);k.post("/api/changePassword",{userId:e,oldPassword:O(b.oldPassword),newPassword:O(b.newPassword)}).then(e=>{e?(H.success("密码修改成功"),L(),E.confirm("密码已修改成功，是否立即退出并重新登录？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"info"}).then(()=>{s.logout().then(()=>{window.location.href="/login"})}).finally(()=>{m(!1)})):m(!1)}).finally(()=>{m(!1)})}})},L=()=>{b.oldPassword="",b.newPassword="",b.confirmPassword="",y.value=0,Object.keys(w).forEach(e=>{w[e]=!1}),h.value?.clearValidate()};return(e,a)=>{const l=u("el-input"),s=u("el-form-item"),m=u("el-button"),g=u("el-form");return f(),t("div",ce,[r(g,{ref_key:"pwdFormRef",ref:h,model:b,rules:F,labelWidth:"120px",class:"password-form",statusIcon:""},{default:i(()=>[r(s,{label:"原密码",prop:"oldPassword"},{default:i(()=>[r(l,{modelValue:b.oldPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>b.oldPassword=e),type:"password",showPassword:!0,placeholder:"请输入原密码",onInput:a[1]||(a[1]=e=>_("oldPassword"))},null,8,["modelValue"])]),_:1}),r(s,{label:"新密码",prop:"newPassword"},{default:i(()=>[r(l,{modelValue:b.newPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>b.newPassword=e),type:"password",showPassword:!0,placeholder:"请输入8-32位密码",autocomplete:"new-password",maxlength:"32",onInput:C},null,8,["modelValue"]),b.newPassword?(f(),t("div",pe,[o("div",ve,[a[5]||(a[5]=d(" 密码强度: ",-1)),o("span",{class:I(["strength-level",S.value])},n(A.value),3)]),o("div",me,[o("div",{class:I(["strength-bar",S.value]),style:P({width:x.value+"%"})},null,6)]),o("div",fe,[a[6]||(a[6]=o("p",null,"密码规则：",-1)),o("ul",null,[o("li",{class:I({satisfied:w.length})},"长度为8-32个字符",2),o("li",{class:I([{satisfied:!w.hasChinese},"error"])},"不能包含中文字符",2)]),a[7]||(a[7]=o("p",null,"建议满足以下条件提高密码安全性：",-1)),o("ul",null,[o("li",{class:I({satisfied:w.hasUppercase})},"包含大写字母",2),o("li",{class:I({satisfied:w.hasLowercase})},"包含小写字母",2),o("li",{class:I({satisfied:w.hasDigit})},"包含数字",2),o("li",{class:I({satisfied:w.hasSpecialChar})},"包含英文特殊字符（如 !@#$%^&*）",2)])])])):v("",!0)]),_:1}),r(s,{label:"确认新密码",prop:"confirmPassword"},{default:i(()=>[r(l,{modelValue:b.confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>b.confirmPassword=e),type:"password",showPassword:!0,placeholder:"请再次输入新密码",autocomplete:"new-password",maxlength:"32",onInput:a[4]||(a[4]=e=>_("confirmPassword"))},null,8,["modelValue"])]),_:1}),r(s,null,{default:i(()=>[r(m,{type:"primary",loading:c(p),onClick:z},{default:i(()=>[...a[8]||(a[8]=[d("修改密码",-1)])]),_:1},8,["loading"]),r(m,{onClick:L},{default:i(()=>[...a[9]||(a[9]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])}}}),[["__scopeId","data-v-eef9168f"]]),he={class:"user-center"},be=j(e({__name:"userCenter",setup(e){const l=a("baseInfo"),s=()=>{const e=document.querySelector(".active-tab");e&&(e.classList.add("tab-animation"),setTimeout(()=>{e.classList.remove("tab-animation")},500))};return(e,a)=>{const d=u("el-tab-pane"),n=u("el-tabs"),c=u("el-card");return f(),t("div",he,[r(c,{class:"user-info-card animate__animated animate__fadeIn animate__faster"},{header:i(()=>[...a[1]||(a[1]=[o("div",{class:"card-header"},[o("span",{class:"header-title"},"个人中心")],-1)])]),default:i(()=>[r(n,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),onTabClick:s},{default:i(()=>[r(d,{label:"基本信息",name:"baseInfo",lazy:""},{default:i(()=>[o("div",{class:I(["tab-content-wrapper",{"active-tab":"baseInfo"===l.value}])},[r(oe)],2)]),_:1}),r(d,{label:"学术档案",name:"otherInfo",lazy:""},{default:i(()=>[o("div",{class:I(["tab-content-wrapper",{"active-tab":"otherInfo"===l.value}])},[r(ne)],2)]),_:1}),r(d,{label:"修改密码",name:"password",lazy:""},{default:i(()=>[o("div",{class:I(["tab-content-wrapper",{"active-tab":"password"===l.value}])},[r(ge)],2)]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),[["__scopeId","data-v-f704d39d"]]);export{be as default};
