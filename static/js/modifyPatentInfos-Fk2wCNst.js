import{y as e,r as a,ay as l,c as t,l as o,h as i,z as n,B as r,L as d,P as u,R as s,J as p,al as c,u as m,O as b,aD as f,A as h}from"./vue-BMnUnhjY.js";import{S as g,g as _,h as v,ad as V,c as D,E as y}from"./elementPlus-iRxZk2_b.js";import{T as Y}from"./tinyMceEditor-EOAlt4H2.js";import{H as E}from"./headerLine-ALaI24G7.js";import{a as P,s as w}from"./index-BT6KgQx3.js";import{u as M}from"./useLoading-D-rekEU2.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const U={class:"modify-patent-container"},z={class:"card-header"},q={key:0,class:"header-buttons"},N={class:"custom-card box-card"},j={class:"card-body"},S={class:"textarea-wrapper"},L={class:"textarea-wrapper"},k=x(e({__name:"modifyPatentInfos",setup(e){const x=l(),k=f(),F=P(),{loading:T,changeLoading:A,closeLoading:C}=M(),I=a(x.query.mode||"add"),R=a(x.query.id),B=a(),H=t(()=>{if(x.query.tabTitle)return decodeURIComponent(x.query.tabTitle);switch(I.value){case"add":return"新增专利";case"edit":return"编辑专利";case"view":return"查看专利";default:return"专利信息"}}),J=o({id:"",title:"",titleEn:"",applicationNum:"",applicants:"",isServicePatent:"0",applicationDate:"",authorizationDate:"",patentPublishDate:"",abstract:"",abstractEn:"",content:"",contentEn:""}),O={title:[{required:!0,message:"请输入专利中文名称",trigger:"blur"},{max:255,message:"名称长度不能超过255个字符",trigger:"blur"}],titleEn:[{max:255,message:"名称长度不能超过255个字符",trigger:"blur"}],applicationNum:[{required:!0,message:"请输入专利申请号",trigger:"blur"},{max:50,message:"申请号长度不能超过50个字符",trigger:"blur"}],applicants:[{required:!0,message:"请输入申请人",trigger:"blur"},{max:500,message:"申请人长度不能超过500个字符",trigger:"blur"}],applicationDate:[{required:!0,message:"请选择申请日期",trigger:"change"}]},W=()=>{B.value&&B.value.validate(e=>{e&&G()})},G=()=>{A(!0);const e={...J};w.post("/api/patent/save",e).then(()=>{y.success("保存成功");const e=x.fullPath;F.delCurTab(e,k,"/patentManage")}).catch(()=>{y.error("保存失败")}).finally(()=>{C()})};return i(()=>{"edit"!==I.value&&"view"!==I.value||R.value&&(A(!0),w.post("/api/patent/detail",{id:R.value}).then(e=>{J.id=e.id,J.title=e.title,J.titleEn=e.titleEn,J.applicationNum=e.applicationNum,J.applicants=e.applicants,J.isServicePatent=e.isServicePatent,J.applicationDate=e.applicationDate,J.authorizationDate=e.authorizationDate,J.patentPublishDate=e.patentPublishDate,J.abstract=e.abstract,J.abstractEn=e.abstractEn,J.content=e.content,J.contentEn=e.contentEn}).finally(()=>{C()}))}),(e,a)=>{const l=c("el-button"),t=c("el-tooltip"),o=c("el-input"),i=c("el-form-item"),f=c("el-col"),y=c("el-row"),P=c("el-date-picker"),w=c("el-radio"),M=c("el-radio-group"),x=c("el-tab-pane"),k=c("el-tabs"),F=c("el-form");return h(),n("div",U,[r("div",z,[r("h2",null,u(H.value),1),"view"!==I.value?(h(),n("div",q,[s(t,{content:"保存",placement:"top",showAfter:200,hideAfter:0},{default:p(()=>[s(l,{type:"primary",circle:"",icon:m(g),loading:m(T),onClick:W},null,8,["icon","loading"])]),_:1})])):d("",!0)]),r("div",N,[r("div",j,[s(F,{ref_key:"formRef",ref:B,model:J,rules:O,labelWidth:"150px",labelPosition:"right",disabled:"view"===I.value},{default:p(()=>[s(E,{title:"基本信息",icon:m(_)},null,8,["icon"]),s(y,{gutter:24},{default:p(()=>[s(f,{span:24},{default:p(()=>[s(i,{label:"专利名称（中文）",prop:"title"},{default:p(()=>[s(o,{modelValue:J.title,"onUpdate:modelValue":a[0]||(a[0]=e=>J.title=e),placeholder:"请输入中文名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(y,{gutter:24},{default:p(()=>[s(f,{span:24},{default:p(()=>[s(i,{label:"专利名称（英文）",prop:"titleEn"},{default:p(()=>[s(o,{modelValue:J.titleEn,"onUpdate:modelValue":a[1]||(a[1]=e=>J.titleEn=e),placeholder:"请输入英文名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(E,{title:"专利信息",icon:m(v)},null,8,["icon"]),s(y,{gutter:24},{default:p(()=>[s(f,{span:12},{default:p(()=>[s(i,{label:"申请号",prop:"applicationNum"},{default:p(()=>[s(o,{modelValue:J.applicationNum,"onUpdate:modelValue":a[2]||(a[2]=e=>J.applicationNum=e),placeholder:"请输入专利申请号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),s(f,{span:12},{default:p(()=>[s(i,{label:"申请人",prop:"applicants"},{default:p(()=>[s(o,{modelValue:J.applicants,"onUpdate:modelValue":a[3]||(a[3]=e=>J.applicants=e),placeholder:"请输入申请人，多个用逗号分隔",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(y,{gutter:24},{default:p(()=>[s(f,{span:8},{default:p(()=>[s(i,{label:"申请日期",prop:"applicationDate"},{default:p(()=>[s(P,{modelValue:J.applicationDate,"onUpdate:modelValue":a[4]||(a[4]=e=>J.applicationDate=e),type:"date",placeholder:"请选择专利申请日期",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),s(f,{span:8},{default:p(()=>[s(i,{label:"授权日期",prop:"authorizationDate"},{default:p(()=>[s(P,{modelValue:J.authorizationDate,"onUpdate:modelValue":a[5]||(a[5]=e=>J.authorizationDate=e),type:"date",placeholder:"请选择专利授权日期",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),s(f,{span:8},{default:p(()=>[s(i,{label:"专利发布日期",prop:"patentPublishDate"},{default:p(()=>[s(P,{modelValue:J.patentPublishDate,"onUpdate:modelValue":a[6]||(a[6]=e=>J.patentPublishDate=e),type:"date",placeholder:"请选择专利官方发布日期",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(y,{gutter:24},{default:p(()=>[s(f,{span:24},{default:p(()=>[s(i,{label:"是否职务专利",prop:"isServicePatent"},{default:p(()=>[s(M,{modelValue:J.isServicePatent,"onUpdate:modelValue":a[7]||(a[7]=e=>J.isServicePatent=e)},{default:p(()=>[s(w,{label:"1",value:"1"},{default:p(()=>[...a[12]||(a[12]=[b("是",-1)])]),_:1}),s(w,{label:"0",value:"0"},{default:p(()=>[...a[13]||(a[13]=[b("否",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(E,{title:"摘要信息",icon:m(V)},null,8,["icon"]),s(i,{label:"摘要",prop:"abstract",class:"content-form-item"},{default:p(()=>[s(k,{type:"border-card",class:"simple-tabs"},{default:p(()=>[s(x,{label:"中文内容"},{default:p(()=>[r("div",S,[s(o,{modelValue:J.abstract,"onUpdate:modelValue":a[8]||(a[8]=e=>J.abstract=e),type:"textarea",rows:6,placeholder:"请输入中文摘要",resize:"none"},null,8,["modelValue"])])]),_:1}),s(x,{label:"英文内容"},{default:p(()=>[r("div",L,[s(o,{modelValue:J.abstractEn,"onUpdate:modelValue":a[9]||(a[9]=e=>J.abstractEn=e),type:"textarea",rows:6,placeholder:"请输入英文摘要",resize:"none"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),s(E,{title:"专利内容",icon:m(D)},null,8,["icon"]),s(i,{label:"内容",prop:"content",class:"content-form-item"},{default:p(()=>[s(k,{type:"border-card",class:"simple-tabs"},{default:p(()=>[s(x,{label:"中文内容"},{default:p(()=>[s(Y,{modelValue:J.content,"onUpdate:modelValue":a[10]||(a[10]=e=>J.content=e),placeholder:"请输入专利内容（中文）",height:500,disabled:"view"===I.value},null,8,["modelValue","disabled"])]),_:1}),s(x,{label:"英文内容"},{default:p(()=>[s(Y,{modelValue:J.contentEn,"onUpdate:modelValue":a[11]||(a[11]=e=>J.contentEn=e),placeholder:"请输入专利内容（英文）",height:500,disabled:"view"===I.value},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])])])])}}}),[["__scopeId","data-v-d6f9a364"]]);export{k as default};
