import{y as a,r as s,h as e,ay as l,aD as t,z as i,R as o,J as n,al as u,B as r,L as c,P as d,O as f,u as p,I as v,Q as m,A as y}from"./vue-BMnUnhjY.js";import{A as b}from"./academicFormEditor-XXmt-AKx.js";import{E as _,A as k,a8 as g,e as h,S as I,q as j}from"./elementPlus-iRxZk2_b.js";import{s as x}from"./index-BT6KgQx3.js";import{u as z}from"./useLoading-D-rekEU2.js";import{_ as C}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./tinyMceEditor-EOAlt4H2.js";const D={class:"modify-user-infos"},A={class:"card-header"},O={class:"header-left"},q={class:"page-title"},E={key:0,class:"user-name"},L={class:"action-buttons"},S={class:"button-group collapse-controls"},U={class:"button-group edit-controls"},F=C(a({__name:"modifyUserOtherInfos",setup(a){const C=t(),F=l(),B=s(""),M=s(""),N=s(),P=s({}),R=s(!0),{loading:w,changeLoading:J}=z({target:".user-info-card"});e(()=>{F.query.userId?(B.value=F.query.userId,M.value=F.query.userName||"",Q()):(_.error("缺少用户ID参数"),C.go(-1))});const Q=()=>{J(!0,{text:"加载中..."}),x.get(`/api/getUserOtherInfo/${B.value}`).then(a=>{P.value=a||{}}).finally(()=>{J(!1)})},$=()=>{R.value=!1},G=()=>{R.value=!0,Q()},H=()=>{N.value&&!w.value&&N.value.saveForm()},K=a=>{J(!0,{text:"保存中..."}),x.post("/api/createOrUpdateUserOtherInfo",a).then(()=>{_.success("保存成功"),R.value=!0,Q()}).finally(()=>{J(!1)})},T=()=>{G()},V=()=>{N.value&&N.value.expandAllSections()},W=()=>{N.value&&N.value.collapseAllSections()};return(a,s)=>{const e=u("el-icon"),l=u("el-button"),t=u("el-scrollbar"),_=u("el-card");return y(),i("div",D,[o(_,{class:"user-info-card"},{header:n(()=>[r("div",A,[r("div",O,[r("span",q,[s[0]||(s[0]=r("span",null,"学术档案",-1)),M.value?(y(),i("span",E,"- "+d(M.value),1)):c("",!0)])]),r("div",L,[r("div",S,[o(l,{type:"primary",link:"",size:"small",class:"action-button",onClick:V},{default:n(()=>[o(e,{class:"button-icon"},{default:n(()=>[o(p(k))]),_:1}),s[1]||(s[1]=f("全部展开 ",-1))]),_:1}),s[3]||(s[3]=r("div",{class:"divider"},null,-1)),o(l,{type:"primary",link:"",size:"small",class:"action-button",onClick:W},{default:n(()=>[o(e,{class:"button-icon"},{default:n(()=>[o(p(g))]),_:1}),s[2]||(s[2]=f("全部折叠 ",-1))]),_:1})]),r("div",U,[R.value?(y(),v(l,{key:0,type:"primary",link:"",size:"small",class:"action-button",onClick:$},{default:n(()=>[o(e,{class:"button-icon"},{default:n(()=>[o(p(h))]),_:1}),s[4]||(s[4]=f("编辑资料 ",-1))]),_:1})):(y(),i(m,{key:1},[o(l,{type:"primary",link:"",size:"small",class:"action-button",disabled:p(w),onClick:H},{default:n(()=>[o(e,{class:"button-icon"},{default:n(()=>[o(p(I))]),_:1}),s[5]||(s[5]=f("保存 ",-1))]),_:1},8,["disabled"]),s[7]||(s[7]=r("div",{class:"divider"},null,-1)),o(l,{type:"info",link:"",size:"small",class:"action-button",disabled:p(w),onClick:G},{default:n(()=>[o(e,{class:"button-icon"},{default:n(()=>[o(p(j))]),_:1}),s[6]||(s[6]=f("取消 ",-1))]),_:1},8,["disabled"])],64))])])])]),default:n(()=>[o(t,null,{default:n(()=>[o(b,{ref_key:"formEditorRef",ref:N,userId:B.value,initialData:P.value,isDisabled:R.value,showButtons:!1,onSave:K,onCancel:T},null,8,["userId","initialData","isDisabled"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-6157e8c6"]]);export{F as default};
