import{y as e,r as l,ay as a,l as t,h as o,z as i,B as d,P as r,R as s,J as n,al as u,u as p,Q as c,a6 as m,I as f,aD as b,A as g}from"./vue-BMnUnhjY.js";import{S as h,E as y}from"./elementPlus-iRxZk2_b.js";import{T as v}from"./tinyMceEditor-EOAlt4H2.js";import{a as _,p as V,s as T}from"./index-BT6KgQx3.js";import{u as j}from"./useLoading-D-rekEU2.js";import{u as q}from"./useDictionary-Cg9QFWfd.js";import{_ as E}from"./_plugin-vue_export-helper-BCo6x5W8.js";const L={class:"modify-lab-profile-container"},x={class:"card-header"},P={class:"header-buttons"},I={class:"custom-card box-card"},U={class:"card-body"},k=E(e({__name:"modifyLabProfileInfos",setup(e){const E=_(V),{dictList:k}=q({dictType:"intro_type",autoLoad:!0}),{changeLoading:w,closeLoading:A,loading:C}=j(),D=a(),M=b(),R=l(D.query.mode||"add"),S=l(D.query.id),W=l(),z=t({id:"",profileType:"5001",title:"",content:"",contentEn:"",status:0}),B={profileType:[{required:!0,message:"请选择类型",trigger:"change"}],title:[{required:!0,message:"请输入简介标题",trigger:"blur"},{max:100,message:"标题长度不能超过100个字符",trigger:"blur"}],content:[{required:!0,message:"请输入中文简介内容",trigger:"blur"}]},F=()=>{W.value&&W.value.validate().then(()=>{w(!0);const e={...z};T.post("/api/labProfile/save",e).then(()=>{y.success("add"===R.value?"新增成功":"更新成功");const e=E.getCurTabPath;e&&E.delCurTab(e,M,"/labProfileManage")}).finally(()=>{A()})})};return o(()=>{"edit"===R.value&&S.value&&S.value&&(w(!0),T.post("/api/labProfile/detail",{id:S.value}).then(e=>{Object.assign(z,{id:e.id,profileType:e.profileType||"5001",title:e.title,content:e.content,contentEn:e.contentEn,status:e.publishStatus})}).finally(()=>{A()}))}),(e,l)=>{const a=u("el-icon"),t=u("el-button"),o=u("el-tooltip"),b=u("el-input"),y=u("el-form-item"),_=u("el-option"),V=u("el-select"),T=u("el-form");return g(),i("div",L,[d("div",x,[d("h2",null,r("edit"===R.value?"编辑简介":"新增简介"),1),d("div",P,[s(o,{content:"保存",placement:"top",showAfter:200,hideAfter:0},{default:n(()=>[s(t,{type:"primary",circle:"",loading:p(C),onClick:F},{default:n(()=>[s(a,null,{default:n(()=>[s(p(h))]),_:1})]),_:1},8,["loading"])]),_:1})])]),d("div",I,[d("div",U,[s(T,{ref_key:"formRef",ref:W,model:z,rules:B,labelWidth:"100px",class:"lab-profile-form"},{default:n(()=>[s(y,{label:"简介标题",prop:"title",required:""},{default:n(()=>[s(b,{modelValue:z.title,"onUpdate:modelValue":l[0]||(l[0]=e=>z.title=e),placeholder:"请输入简介标题",maxlength:"100",showWordLimit:""},null,8,["modelValue"])]),_:1}),s(y,{label:"类型",prop:"profileType",required:""},{default:n(()=>[s(V,{modelValue:z.profileType,"onUpdate:modelValue":l[1]||(l[1]=e=>z.profileType=e),placeholder:"请选择类型",disabled:"edit"===R.value,style:{width:"100%"}},{default:n(()=>[(g(!0),i(c,null,m(p(k),e=>(g(),f(_,{key:e.dictId,label:e.dictValue,value:e.dictId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s(y,{label:"中文内容",prop:"content",required:""},{default:n(()=>[s(v,{modelValue:z.content,"onUpdate:modelValue":l[2]||(l[2]=e=>z.content=e),height:380,placeholder:"请输入中文简介内容"},null,8,["modelValue"])]),_:1}),s(y,{label:"英文内容",prop:"contentEn"},{default:n(()=>[s(v,{modelValue:z.contentEn,"onUpdate:modelValue":l[3]||(l[3]=e=>z.contentEn=e),height:380,placeholder:"请输入英文简介内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])])}}}),[["__scopeId","data-v-f493ab14"]]);export{k as default};
