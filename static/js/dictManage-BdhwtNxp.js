import{h as e,a4 as a,a3 as t,C as l,E as d,S as i,q as s,a7 as c,g as u}from"./elementPlus-iRxZk2_b.js";import{s as r,c as n}from"./index-BT6KgQx3.js";import{y as o,z as p,B as m,R as v,al as y,J as f,L as T,Q as g,a6 as V,E as b,u as _,P as h,A as k,I,O as C,W as O,r as U,l as x,j as E,K as w,S as N,c as F,h as S,n as j}from"./vue-BMnUnhjY.js";import{_ as z}from"./_plugin-vue_export-helper-BCo6x5W8.js";const B={class:"dict-type-list-container"},L={class:"dict-type-list"},P=["onClick"],R={class:"dict-item-content"},q={class:"dict-item-text"},A={class:"dict-item-count"},D={key:0,class:"empty-list"},J=z(o({__name:"dictTypeList",props:{dictTypes:{},currentType:{},itemCounts:{}},emits:["select","update:currentType"],setup(a,{emit:t}){const l=a,d=t,i=e=>l.itemCounts[e.dictType]||0;return(a,t)=>{const l=y("el-icon"),s=y("el-tooltip"),c=y("el-empty"),u=y("el-scrollbar");return k(),p("div",B,[t[0]||(t[0]=m("div",{class:"panel-header"},[m("span",{class:"panel-title"},"字典类型")],-1)),v(u,{height:"calc(100vh - 230px)"},{default:f(()=>[m("div",L,[(k(!0),p(g,null,V(a.dictTypes,(t,c)=>(k(),p("div",{key:c,class:b(["dict-type-item",{active:a.currentType?.dictId===t.dictId}]),onClick:e=>{return d("update:currentType",a=t),void d("select",a);var a}},[v(s,{content:t.dictTypeName||t.dictType,placement:"right",showAfter:1e3},{default:f(()=>[m("div",R,[v(l,null,{default:f(()=>[v(_(e))]),_:1}),m("span",q,h(t.dictTypeName||t.dictType),1)])]),_:2},1032,["content"]),m("span",A,h(i(t)),1)],10,P))),128))]),0===a.dictTypes.length?(k(),p("div",D,[v(c,{description:"暂无字典类型",imageSize:80})])):T("",!0)]),_:1})])}}}),[["__scopeId","data-v-615bcfac"]]),W={class:"dict-code-list-container"},$={class:"panel-header"},M={class:"panel-title"},K={key:0},Q={key:1},G={class:"panel-actions"},H={key:0,class:"empty-list"},X={key:1,class:"dict-code-list"},Y=["onClick"],Z={class:"dict-code-info"},ee={class:"dict-code-header"},ae={class:"dict-code-primary"},te={class:"dict-code-actions"},le={class:"dict-code-body"},de={class:"dict-code-value"},ie={key:0,class:"dict-code-value-en"},se=z(o({__name:"dictCodeList",props:{dictCodes:{},currentCode:{},currentType:{}},emits:["select","add","search","deleted","statusChange"],setup(e,{emit:i}){const s=i,c=()=>{s("add")};return(e,i)=>{const u=y("el-button"),n=y("el-tooltip"),o=y("el-empty"),U=y("el-tag"),x=y("el-switch"),E=y("el-scrollbar");return k(),p("div",W,[m("div",$,[m("span",M,[e.currentType?(k(),p("span",K,h(e.currentType.dictTypeName||e.currentType.dictType),1)):(k(),p("span",Q,"字典项列表"))]),m("div",G,[v(n,{content:"新增字典项",placement:"top"},{default:f(()=>[v(u,{type:"primary",icon:_(a),circle:"",size:"small",disabled:!e.currentType,onClick:c},null,8,["icon","disabled"])]),_:1})])]),e.currentType?(k(),I(E,{key:1},{default:f(()=>[0===e.dictCodes.length?(k(),p("div",H,[v(o,{description:"暂无字典项",imageSize:80})])):(k(),p("div",X,[(k(!0),p(g,null,V(e.dictCodes,(a,c)=>(k(),p("div",{key:c,class:b(["dict-code-item",{active:e.currentCode?.dictId===a.dictId}]),onClick:e=>{s("select",a)}},[m("div",Z,[m("div",ee,[m("div",ae,[v(U,{size:"small",type:1===a.status?"success":"info"},{default:f(()=>[C(h(a.dictId),1)]),_:2},1032,["type"])]),m("div",te,[v(x,{modelValue:a.status,"onUpdate:modelValue":e=>a.status=e,activeValue:1,inactiveValue:0,class:"dict-item-switch",size:"small",inlinePrompt:"",activeText:"启",inactiveText:"禁",onClick:i[0]||(i[0]=O(()=>{},["stop"])),onChange:e=>((e,a)=>{const t=1===a?"启用":"禁用",i=1===a?0:1;l.confirm(`确认${t}该字典项吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.put(`/api/dict/status/${e.dictId}`,{status:1===a?0:1}).then(()=>{d.success(`${t}成功`),s("statusChange",{...e,status:a})}).catch(()=>{e.status=i})}).catch(()=>{e.status=i})})(a,e)},null,8,["modelValue","onUpdate:modelValue","onChange"]),v(n,{content:"删除",placement:"top"},{default:f(()=>[v(u,{type:"danger",icon:_(t),circle:"",size:"small",class:"dict-item-delete",onClick:O(e=>{return t=a,void l.confirm("确认删除该字典数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.post("/api/dict/delete",{id:t.dictId}).then(()=>{d.success("删除成功"),s("deleted",t)})}).catch(()=>{});var t},["stop"])},null,8,["icon","onClick"])]),_:2},1024)])]),m("div",le,[m("div",de,h(a.dictValue),1),a.dictValueEn?(k(),p("div",ie,h(a.dictValueEn),1)):T("",!0)])])],10,Y))),128))]))]),_:1})):(k(),I(o,{key:0,description:"请选择字典类型"}))])}}}),[["__scopeId","data-v-871d4f94"]]),ce={class:"dict-form-container"},ue={class:"panel-header"},re={class:"panel-title"},ne={class:"panel-actions"},oe={class:"dict-form-wrapper"},pe={class:"info-section"},me={class:"info-grid"},ve={class:"info-item"},ye={class:"info-value"},fe={class:"info-item"},Te={class:"info-value"},ge={class:"info-item"},Ve={class:"info-value"},be={class:"info-item"},_e={class:"info-value"},he=z(o({__name:"dictForm",props:{dictForm:{}},emits:["saved","reset","update:dictForm"],setup(e,{emit:a}){const t=e,l=a,u=U(!1),n=U(null),o=U(null),T=x({...t.dictForm});E(()=>t.dictForm,e=>{Object.assign(T,e),u.value=!1,n.value=null},{deep:!0,immediate:!0});const V={dictValue:[{required:!0,message:"请输入字典值(中文)",trigger:"blur"},{max:200,message:"长度不能超过200个字符",trigger:"blur"}],dictValueEn:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}],sortOrder:[{type:"number",message:"排序必须为数字",trigger:"blur"}],remark:[{max:500,message:"长度不能超过500个字符",trigger:"blur"}]},b=()=>{n.value=JSON.parse(JSON.stringify(T)),u.value=!0},O=()=>{n.value&&Object.assign(T,n.value),u.value=!1},F=()=>{o.value&&o.value.validate(e=>{if(e){const e={dictId:t.dictForm.dictId,dictType:T.dictType,dictTypeName:T.dictTypeName,dictValue:T.dictValue,dictValueEn:T.dictValueEn,sortOrder:T.sortOrder,remark:T.remark,status:T.status};r.post("/api/dict/save",e).then(()=>{d.success("更新成功"),u.value=!1,l("update:dictForm",{...t.dictForm,...T}),l("saved",T)})}})};return(e,a)=>{const t=y("el-button"),l=y("el-tooltip"),d=y("el-input"),r=y("el-form-item"),n=y("el-col"),U=y("el-input-number"),x=y("el-radio"),E=y("el-radio-group"),S=y("el-row"),j=y("el-form"),z=y("el-scrollbar");return k(),p("div",ce,[m("div",ue,[m("span",re,"【"+h(e.dictForm.dictValue)+"】详情",1),m("div",ne,[u.value?(k(),p(g,{key:0},[v(l,{content:"保存",placement:"top"},{default:f(()=>[v(t,{type:"primary",circle:"",icon:_(i),size:"small",onClick:F},null,8,["icon"])]),_:1}),v(l,{content:"取消",placement:"top"},{default:f(()=>[v(t,{circle:"",icon:_(s),size:"small",onClick:O},null,8,["icon"])]),_:1})],64)):(k(),I(l,{key:1,content:"编辑",placement:"top"},{default:f(()=>[v(t,{type:"primary",circle:"",icon:_(c),size:"small",onClick:b},null,8,["icon"])]),_:1}))])]),v(z,null,{default:f(()=>[m("div",oe,[v(j,{ref_key:"formRef",ref:o,model:T,rules:V,disabled:!u.value,labelPosition:"top",class:"dict-form"},{default:f(()=>[v(S,{gutter:16},{default:f(()=>[v(n,{span:24},{default:f(()=>[v(r,{label:"字典类型"},{default:f(()=>[v(d,{value:T.dictTypeName,disabled:""},null,8,["value"])]),_:1})]),_:1}),v(n,{span:12},{default:f(()=>[v(r,{label:"排序",prop:"sortOrder"},{default:f(()=>[v(U,{modelValue:T.sortOrder,"onUpdate:modelValue":a[0]||(a[0]=e=>T.sortOrder=e),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),v(n,{span:24},{default:f(()=>[v(r,{label:"字典值(中文)",prop:"dictValue"},{default:f(()=>[v(d,{modelValue:T.dictValue,"onUpdate:modelValue":a[1]||(a[1]=e=>T.dictValue=e),placeholder:"请输入字典值",type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1}),v(n,{span:24},{default:f(()=>[v(r,{label:"字典值(英文)",prop:"dictValueEn"},{default:f(()=>[v(d,{modelValue:T.dictValueEn,"onUpdate:modelValue":a[2]||(a[2]=e=>T.dictValueEn=e),placeholder:"请输入字典值(英文)",type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1}),v(n,{span:12},{default:f(()=>[v(r,{label:"状态",prop:"status"},{default:f(()=>[v(E,{modelValue:T.status,"onUpdate:modelValue":a[3]||(a[3]=e=>T.status=e)},{default:f(()=>[v(x,{label:1,value:1},{default:f(()=>[...a[5]||(a[5]=[C("启用",-1)])]),_:1}),v(x,{label:0,value:0},{default:f(()=>[...a[6]||(a[6]=[C("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),v(n,{span:24},{default:f(()=>[v(r,{label:"备注",prop:"remark"},{default:f(()=>[v(d,{modelValue:T.remark,"onUpdate:modelValue":a[4]||(a[4]=e=>T.remark=e),type:"textarea",placeholder:"请输入备注信息",rows:3,maxlength:"500",showWordLimit:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"]),w(m("div",pe,[a[11]||(a[11]=m("div",{class:"info-title"},"系统信息",-1)),m("div",me,[m("div",ve,[a[7]||(a[7]=m("span",{class:"info-label"},"创建人：",-1)),m("span",ye,h(T.createUserId||"-"),1)]),m("div",fe,[a[8]||(a[8]=m("span",{class:"info-label"},"创建时间：",-1)),m("span",Te,h(T.createdTimes||"-"),1)]),m("div",ge,[a[9]||(a[9]=m("span",{class:"info-label"},"更新人：",-1)),m("span",Ve,h(T.updateUserId||"-"),1)]),m("div",be,[a[10]||(a[10]=m("span",{class:"info-label"},"更新时间：",-1)),m("span",_e,h(T.updatedTimes||"-"),1)])])],512),[[N,!u.value]])])]),_:1})])}}}),[["__scopeId","data-v-3b415015"]]),ke=o({__name:"dictItemDialog",props:{visible:{type:Boolean},loading:{type:Boolean},form:{},currentType:{}},emits:["update:visible","update:loading","submitted"],setup(e,{emit:a}){const t=e,l=a,i=U(null),s=U({});E(()=>t.form,e=>{e&&(s.value={...e})},{immediate:!0,deep:!0});const c={dictValue:[{required:!0,message:"请输入字典值(中文)",trigger:"blur"},{max:200,message:"长度不能超过200个字符",trigger:"blur"}],dictValueEn:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}],sortOrder:[{type:"number",message:"排序必须为数字",trigger:"blur"}],remark:[{max:500,message:"长度不能超过500个字符",trigger:"blur"}]},u=()=>{i.value?.resetFields()},n=()=>{i.value&&i.value.validate(e=>{if(e){Object.assign(t.form,s.value);const e={dictType:s.value.dictType,dictTypeName:s.value.dictTypeName,dictValue:s.value.dictValue,dictValueEn:s.value.dictValueEn,sortOrder:s.value.sortOrder,remark:s.value.remark,status:s.value.status};l("update:loading",!0),r.post("/api/dict/save",e).then(()=>{d.success("新增字典项成功"),l("update:visible",!1),l("submitted")}).finally(()=>{l("update:loading",!1)})}})},o=F({get:()=>t.visible,set:e=>l("update:visible",e)});return(e,a)=>{const t=y("el-input"),l=y("el-form-item"),d=y("el-input-number"),r=y("el-radio"),p=y("el-radio-group"),m=y("el-form"),T=y("el-button"),g=y("el-dialog");return k(),I(g,{modelValue:o.value,"onUpdate:modelValue":a[7]||(a[7]=e=>o.value=e),title:"新增字典项",width:"500px",destroyOnClose:"",draggable:"",closeOnClickModal:!1,appendToBody:"",onClose:u},{footer:f(()=>[v(T,{onClick:a[6]||(a[6]=e=>o.value=!1)},{default:f(()=>[...a[10]||(a[10]=[C("取消",-1)])]),_:1}),v(T,{type:"primary",loading:e.loading,onClick:n},{default:f(()=>[...a[11]||(a[11]=[C("确定",-1)])]),_:1},8,["loading"])]),default:f(()=>[v(m,{ref_key:"localFormRef",ref:i,model:s.value,rules:c,labelPosition:"top"},{default:f(()=>[v(l,{label:"字典类型"},{default:f(()=>[v(t,{modelValue:s.value.dictTypeName,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.dictTypeName=e),disabled:""},null,8,["modelValue"])]),_:1}),v(l,{label:"字典值(中文)",prop:"dictValue"},{default:f(()=>[v(t,{modelValue:s.value.dictValue,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.dictValue=e),placeholder:"请输入字典值(中文)",clearable:""},null,8,["modelValue"])]),_:1}),v(l,{label:"字典值(英文)",prop:"dictValueEn"},{default:f(()=>[v(t,{modelValue:s.value.dictValueEn,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.dictValueEn=e),placeholder:"请输入字典值(英文)",clearable:""},null,8,["modelValue"])]),_:1}),v(l,{label:"排序",prop:"sortOrder"},{default:f(()=>[v(d,{modelValue:s.value.sortOrder,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.sortOrder=e),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),v(l,{label:"状态",prop:"status"},{default:f(()=>[v(p,{modelValue:s.value.status,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.status=e)},{default:f(()=>[v(r,{label:1,value:1},{default:f(()=>[...a[8]||(a[8]=[C("启用",-1)])]),_:1}),v(r,{label:0,value:0},{default:f(()=>[...a[9]||(a[9]=[C("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),v(l,{label:"备注",prop:"remark"},{default:f(()=>[v(t,{modelValue:s.value.remark,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.remark=e),type:"textarea",placeholder:"请输入备注信息",rows:3,maxlength:"500",showWordLimit:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ie={class:"dict-manage-container"},Ce={key:1,class:"empty-state"},Oe=z(o({__name:"dictManage",setup(e){const a=U(null),t=U(null),l=n(),i=U([]),s=U([]),c=U([]),o=U({}),m=U(!1),T=U(!1),g=x({id:"",dictId:"",dictType:"",dictTypeName:"",dictValue:"",dictValueEn:"",sortOrder:0,remark:"",status:1,createUserId:"",createdTimes:"",updateUserId:"",updatedTimes:""}),V=x({id:"",dictId:"",dictType:"",dictTypeName:"",dictValue:"",dictValueEn:"",sortOrder:0,remark:"",status:1,createUserId:"",createdTimes:"",updateUserId:"",updatedTimes:""});S(()=>{b()});const b=()=>r.get("/api/dict/treeList").then(e=>{if(c.value=e||[],i.value=e.filter(e=>e.isType),o.value=e.reduce((e,a)=>(e[a.dictType]=a.children?.length||0,e),{}),a.value){const e=i.value.find(e=>e.dictType===a.value?.dictType);e&&h(e)}}),h=e=>{t.value=null,B();const a=c.value.find(a=>a.dictType===e.dictType);a&&a.children?s.value=a.children.map(e=>({...e})).sort((e,a)=>e.sortOrder-a.sortOrder):s.value=[]},C=e=>{t.value=e,j(()=>{Object.assign(V,{id:e.id,dictId:e.dictId,dictType:e.dictType,dictTypeName:e.dictTypeName,dictValue:e.dictValue,dictValueEn:e.dictValueEn||"",sortOrder:e.sortOrder||0,remark:e.remark||"",status:e.status,createUserId:e.createUserId||"",createdTimes:e.createdTimes||"",updateUserId:e.updateUserId||"",updatedTimes:e.updatedTimes||"",isType:e.isType})})},O=()=>{a.value?(m.value=!0,Object.assign(g,{id:"",dictId:"",dictType:a.value.dictType,dictTypeName:a.value.dictTypeName,dictValue:"",dictValueEn:"",sortOrder:0,remark:"",status:1,createUserId:"",createdTimes:"",updateUserId:"",updatedTimes:""})):d.warning("请先选择字典类型")},E=()=>{z(),b()},w=e=>{z(),b().then(()=>{if(s.value.length>0&&e.id){const a=s.value.find(a=>a.dictId===e.dictId);a&&C(a)}})},N=e=>{t.value&&t.value.id===e.id&&(t.value=null,B()),z(),b()},F=e=>{z(),t.value&&t.value.id===e.id&&C(e)},z=()=>{a.value?.dictType&&l.clearDictCache(a.value.dictType)},B=()=>{t.value?C(t.value):Object.assign(V,{id:"",dictId:"",dictType:"",dictTypeName:"",dictValue:"",dictValueEn:"",sortOrder:0,remark:"",status:1,createUserId:"",createdTimes:"",updateUserId:"",updatedTimes:""})};return(e,l)=>{const d=y("el-col"),c=y("el-icon"),r=y("el-empty"),n=y("el-row"),b=y("el-card");return k(),p("div",Ie,[v(b,{class:"dict-card no-padding"},{default:f(()=>[v(n,{gutter:0,class:"dict-manage-row"},{default:f(()=>[v(d,{span:5,class:"dict-panel dict-type-panel"},{default:f(()=>[v(J,{currentType:a.value,"onUpdate:currentType":l[0]||(l[0]=e=>a.value=e),dictTypes:i.value,itemCounts:o.value,onSelect:h},null,8,["currentType","dictTypes","itemCounts"])]),_:1}),v(d,{span:7,class:"dict-panel dict-code-panel"},{default:f(()=>[v(se,{currentCode:t.value,currentType:a.value,dictCodes:s.value,onSelect:C,onAdd:O,onDeleted:N,onStatusChange:F},null,8,["currentCode","currentType","dictCodes"])]),_:1}),v(d,{span:12,class:"dict-panel dict-detail-panel"},{default:f(()=>[t.value?(k(),I(he,{key:t.value.dictId,dictForm:V,onReset:B,onSaved:w},null,8,["dictForm"])):(k(),p("div",Ce,[v(r,{description:"请选择字典项查看详情",imageSize:180},{image:f(()=>[v(c,{class:"empty-icon"},{default:f(()=>[v(_(u))]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1}),v(ke,{visible:m.value,"onUpdate:visible":l[1]||(l[1]=e=>m.value=e),loading:T.value,"onUpdate:loading":l[2]||(l[2]=e=>T.value=e),form:g,currentType:a.value,onSubmitted:E},null,8,["visible","loading","form","currentType"])])}}}),[["__scopeId","data-v-7e1f1a0d"]]);export{Oe as default};
