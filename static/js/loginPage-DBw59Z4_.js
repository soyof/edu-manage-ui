import{y as e,c as t,r as s,j as a,h as l,X as n,l as r,z as o,B as i,Q as c,a6 as d,K as u,S as v,aF as m,R as p,J as f,a4 as h,u as y,al as g,ay as M,aD as w,D as b,P as x,E,I as k,W as $,O as L,A as _}from"./vue-BMnUnhjY.js";import{E as P,j as W,R as X,v as D,y as I,S as C}from"./elementPlus-iRxZk2_b.js";import{u as j,p as z,b as R,s as S}from"./index-BT6KgQx3.js";import{e as T}from"./pwdUtils-tpakkPSj.js";import{_ as V}from"./_plugin-vue_export-helper-BCo6x5W8.js";const B={class:"login-container"},U={class:"tech-background"},q={class:"particle-network"},F={class:"molecular-network"},K={class:"hexagon-grid"},G={class:"dna-helix"},A={class:"dna-strand"},J={class:"digital-stream"},O={class:"tech-code-decoration"},Q={class:"tech-dots"},Y={class:"login-content"},H={class:"login-decoration"},N={class:"tech-graphic"},Z={class:"tech-beams"},ee={class:"research-areas"},te={class:"areas-container"},se={class:"area-name"},ae={class:"circuit-decoration"},le={class:"bottom-decoration"},ne={class:"circuit-paths"},re={class:"login-form-container"},oe={class:"slider-container"},ie={class:"slider-text"},ce=["disabled"],de={class:"cyber-button__text"},ue={key:0,class:"loading-dots"},ve=V(e({__name:"loginPage",setup(e){const V=w(),ve=M(),me=j(z),pe=R(z),fe=t(()=>pe.themeConfig.primaryColor),he=t(()=>pe.themeConfig.headerBgGradient),ye=t(()=>pe.themeConfig.headerBgColor),ge=s(!1),Me=()=>{ge.value=window.innerWidth<768},we=(e,t)=>{const s=e.replace("#","");return`rgba(${parseInt(s.substring(0,2),16)}, ${parseInt(s.substring(2,4),16)}, ${parseInt(s.substring(4,6),16)}, ${t})`},be=()=>{const e=document.documentElement;e.style.setProperty("--login-primary-color",fe.value),e.style.setProperty("--login-bg-color",ye.value),e.style.setProperty("--login-primary-gradient",he.value),e.style.setProperty("--login-primary-10",we(fe.value,.1)),e.style.setProperty("--login-primary-20",we(fe.value,.2)),e.style.setProperty("--login-primary-30",we(fe.value,.3)),e.style.setProperty("--login-primary-40",we(fe.value,.4)),e.style.setProperty("--login-primary-50",we(fe.value,.5)),e.style.setProperty("--login-primary-70",we(fe.value,.7)),e.style.setProperty("--login-primary-80",we(fe.value,.8)),e.style.setProperty("--login-bg-40",we(ye.value,.4)),e.style.setProperty("--login-bg-70",we(ye.value,.7))};a(()=>pe.currentTheme,()=>{be()}),l(()=>{pe.initTheme(),be(),Me(),window.addEventListener("resize",Ee),window.addEventListener("resize",ke)}),n(()=>{window.removeEventListener("resize",Ee),window.removeEventListener("resize",ke)});const xe=(e,t)=>{let s=null;return function(...a){s&&clearTimeout(s),s=window.setTimeout(()=>{e.apply(this,a),s=null},t)}},Ee=xe(Me,200),ke=xe(()=>{if(Ie.success){const e=Xe.value;if(e){const t=De.value?.offsetWidth||40,s=e.clientWidth-t;Ie.left=s,e.style.setProperty("--slider-track-width",`${e.clientWidth}px`),De.value&&(De.value.style.transform=`translateX(${s}px)`)}}else Fe()},200),$e=s(null),Le=r({username:"",password:"",verifySuccess:!1}),_e=s(!1),Pe=s("password"),We=["合成基因组学","CRISPR基因编辑","蛋白质工程","代谢工程","生物传感器","生物材料设计"],Xe=s(null),De=s(null),Ie=r({isMoving:!1,startX:0,left:0,success:!1,text:"请向右滑动验证"}),Ce={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifySuccess:[{validator:(e,t,s)=>{Ie.success?s():s(new Error("请完成滑块验证"))},trigger:"change"}]},je=()=>{Pe.value="password"===Pe.value?"text":"password"},ze=e=>{if(Ie.success)return;Ie.isMoving=!0;Xe.value;Ie.startX=e.clientX,document.addEventListener("mousemove",Te),document.addEventListener("mouseup",Be);const t=Xe.value?.parentElement;t&&t.addEventListener("mouseleave",Re)},Re=()=>{if(!Ie.isMoving)return;const e=Xe.value;if(e){const t=e.clientWidth-(De.value?.offsetWidth||40);Ie.left>=t/3?qe():Ie.success||Fe()}Ie.isMoving=!1,document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Be);const t=Xe.value?.parentElement;t&&t.removeEventListener("mouseleave",Re)},Se=e=>{if(!Le.username||!Le.password)return void P.warning("请先输入用户名和密码");if(Ie.success)return;e.preventDefault(),Ie.isMoving=!0;Xe.value;Ie.startX=e.touches[0].clientX,document.addEventListener("touchmove",Ve),document.addEventListener("touchend",Ue)},Te=e=>{if(!Ie.isMoving)return;const t=Xe.value;if(!t)return;const s=e.clientX-Ie.startX,a=t.clientWidth-(De.value?.offsetWidth||40);Ie.left=Math.min(Math.max(0,Ie.left+s),a),Ie.startX=e.clientX,Ke(),Ie.left>=a-5&&qe()},Ve=e=>{if(!Ie.isMoving)return;const t=Xe.value;if(!t)return;const s=e.touches[0].clientX-Ie.startX,a=t.clientWidth-(De.value?.offsetWidth||40);Ie.left=Math.min(Math.max(0,Ie.left+s),a),Ie.startX=e.touches[0].clientX,e.preventDefault(),Ke(),Ie.left>=a-5&&qe()},Be=()=>{if(!Ie.isMoving)return;const e=Xe.value;if(e){const t=e.clientWidth-(De.value?.offsetWidth||40);Ie.left>=t/3?qe():Ie.success||Fe()}else Ie.success||Fe();Ie.isMoving=!1,document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Be);const t=Xe.value?.parentElement;t&&t.removeEventListener("mouseleave",Re)},Ue=()=>{if(!Ie.isMoving)return;const e=Xe.value;if(e){const t=e.clientWidth-(De.value?.offsetWidth||40);Ie.left>=t/3?qe():Ie.success||Fe()}else Ie.success||Fe();Ie.isMoving=!1,document.removeEventListener("touchmove",Ve),document.removeEventListener("touchend",Ue)},qe=()=>{Ie.success=!0,Ie.text="验证成功",Le.verifySuccess=!0;const e=Xe.value;if(e){const t=De.value?.offsetWidth||40,s=e.clientWidth-t;Ie.left=s,e.style.setProperty("--slider-track-width",`${e.clientWidth}px`),De.value&&(De.value.style.transform=`translateX(${Ie.left}px)`)}document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Be),document.removeEventListener("touchmove",Ve),document.removeEventListener("touchend",Ue)},Fe=()=>{Ie.left=0;const e=Xe.value;e&&e.style.setProperty("--slider-track-width","0px"),De.value&&(De.value.style.transform="translateX(0)")};n(()=>{document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Be),document.removeEventListener("touchmove",Ve),document.removeEventListener("touchend",Ue);const e=Xe.value?.parentElement;e&&e.removeEventListener("mouseleave",Re)});const Ke=()=>{const e=Xe.value;if(!e)return;const t=De.value?.offsetWidth||40,s=Ie.left+t/2;e.style.setProperty("--slider-track-width",`${s}px`),De.value&&(De.value.style.transform=`translateX(${Ie.left}px)`)},Ge=xe(()=>{$e.value&&(Ie.success?_e.value||$e.value.validate(e=>{if(e){_e.value=!0;const e={user_id:Le.username,password:T(Le.password)};S.post("/api/login",e).then(e=>{if(e){me.updateToken(e.token),me.updateUserInfo(e.userInfos),P.success("登录成功");const t=ve.query.redirect;V.push(t||"/")}else P.error("登录失败，返回数据格式不正确")}).finally(()=>{_e.value=!1})}else P.error("请检查输入信息")}):P.warning("请完成滑块验证"))},500);return(e,t)=>{const s=g("el-input"),a=g("el-form-item"),l=g("el-icon"),n=g("el-form");return _(),o("div",B,[i("div",U,[i("div",q,[(_(),o(c,null,d(40,e=>i("div",{key:`particle-${e}`,class:"particle",style:b({top:100*Math.random()+"%",left:100*Math.random()+"%",width:2+4*Math.random()+"px",height:2+4*Math.random()+"px",opacity:.2+.5*Math.random(),animationDuration:10+20*Math.random()+"s",animationDelay:5*Math.random()+"s"})},null,4)),64))]),i("div",F,[(_(),o(c,null,d(6,e=>i("div",{key:`molecule-${e}`,class:"molecule",style:b({top:100*Math.random()+"%",left:100*Math.random()+"%",transform:`scale(${.5+1*Math.random()})`})},[t[3]||(t[3]=i("div",{class:"molecule-center"},null,-1)),(_(),o(c,null,d(5,e=>i("div",{key:`bond-${e}`,class:"molecule-bond",style:b({transform:`rotate(${72*e}deg)`})},null,4)),64))],4)),64))]),i("div",K,[(_(),o(c,null,d(12,e=>i("div",{key:`hex-row-${e}`,class:"hex-row",style:b({top:8*e+"%"})},[(_(),o(c,null,d(12,t=>i("div",{key:`hex-${e}-${t}`,class:"hexagon",style:b({left:8*t-e%2*4+"%",animationDelay:.2*(e+t)+"s",opacity:Math.random()>.7?.8:.2})},null,4)),64))],4)),64))]),i("div",G,[i("div",A,[(_(),o(c,null,d(10,e=>i("div",{key:`dna-rung-${e}`,class:"dna-rung",style:b({top:10*e+"%",transform:`rotateY(${36*e}deg)`})},[...t[4]||(t[4]=[i("div",{class:"dna-base left"},null,-1),i("div",{class:"dna-base right"},null,-1)])],4)),64))])]),i("div",J,[(_(),o(c,null,d(8,e=>i("div",{key:`stream-${e}`,class:"stream-column",style:b({left:12.5*e+"%",animationDuration:15+10*Math.random()+"s",opacity:.1+.2*Math.random()})},[(_(),o(c,null,d(20,t=>i("div",{key:`digit-${e}-${t}`,class:"stream-digit",style:b({animationDelay:.3*t+"s",opacity:.7*Math.random()})},x(Math.round(Math.random())),5)),64))],4)),64))])]),i("div",O,[(_(),o(c,null,d(20,e=>i("div",{key:`code-${e}`,class:"code-line",style:b({top:100*Math.random()+"%",left:100*Math.random()+"%",width:50+150*Math.random()+"px",opacity:.1+.3*Math.random(),animationDuration:3+7*Math.random()+"s",animationDelay:5*Math.random()+"s"})},null,4)),64))]),i("div",Q,[(_(),o(c,null,d(30,e=>i("div",{key:`dot-${e}`,class:"tech-dot",style:b({top:100*Math.random()+"%",left:100*Math.random()+"%",animationDuration:3+5*Math.random()+"s",animationDelay:3*Math.random()+"s"})},null,4)),64))]),i("div",Y,[u(i("div",H,[i("div",N,[t[5]||(t[5]=m('<div class="pulse-container" data-v-5e62431b><div class="tech-circle c1" data-v-5e62431b></div><div class="tech-circle c2" data-v-5e62431b></div><div class="tech-circle c3" data-v-5e62431b></div><div class="tech-circle-dot" data-v-5e62431b></div></div><div class="tech-grid" data-v-5e62431b></div>',2)),i("div",Z,[(_(),o(c,null,d(8,e=>i("div",{key:e,class:"tech-beam",style:b({transform:`rotate(${45*e}deg)`})},null,4)),64))])]),i("div",ee,[t[7]||(t[7]=i("div",{class:"area-title"},"研究方向",-1)),i("div",te,[(_(),o(c,null,d(We,(e,s)=>i("div",{key:s,class:"area-item",style:b({animationDelay:.2*s+"s"})},[t[6]||(t[6]=i("div",{class:"area-icon"},[i("div",{class:"icon-hexagon"}),i("div",{class:"icon-circle"})],-1)),i("div",se,x(e),1)],4)),64))]),i("div",ae,[(_(),o(c,null,d(3,e=>i("div",{key:e,class:"circuit-line"})),64)),(_(),o(c,null,d(4,e=>i("div",{key:`node-${e}`,class:"circuit-node"})),64))])]),i("div",le,[t[9]||(t[9]=i("div",{class:"tech-scan-line"},null,-1)),i("div",ne,[(_(),o(c,null,d(3,e=>i("div",{key:e,class:"circuit-path"},[...t[8]||(t[8]=[i("div",{class:"circuit-node"},null,-1)])])),64))])])],512),[[v,!ge.value]]),i("div",re,[t[11]||(t[11]=i("div",{class:"login-header"},[i("h1",{class:"title"},"合成生物学研究所"),i("p",{class:"subtitle"},"管理系统")],-1)),p(n,{ref_key:"loginFormRef",ref:$e,model:Le,rules:Ce,class:"login-form",onKeyup:h(y(Ge),["enter"])},{default:f(()=>[p(a,{prop:"username"},{default:f(()=>[p(s,{modelValue:Le.username,"onUpdate:modelValue":t[0]||(t[0]=e=>Le.username=e),placeholder:"请输入用户名",prefixIcon:y(W),size:"large"},null,8,["modelValue","prefixIcon"])]),_:1}),p(a,{prop:"password"},{default:f(()=>[p(s,{modelValue:Le.password,"onUpdate:modelValue":t[1]||(t[1]=e=>Le.password=e),type:Pe.value,placeholder:"请输入密码",prefixIcon:y(X),size:"large"},{suffix:f(()=>[p(l,{class:E(["password-icon","password"===Pe.value?"":"actives"]),onClick:je},{default:f(()=>[p(y(D))]),_:1},8,["class"])]),_:1},8,["modelValue","type","prefixIcon"])]),_:1}),p(a,{prop:"verifySuccess"},{default:f(()=>[i("div",oe,[i("div",{ref_key:"sliderBgRef",ref:Xe,class:E(["slider-bg",{success:Ie.success}])},[i("div",ie,x(Ie.text),1),i("div",{ref_key:"sliderBtnRef",ref:De,class:"slider-button",style:b({transform:`translateX(${Ie.left}px)`}),onMousedown:ze,onTouchstart:Se},[Ie.success?(_(),k(l,{key:1},{default:f(()=>[p(y(C))]),_:1})):(_(),k(l,{key:0},{default:f(()=>[p(y(I))]),_:1}))],36)],2)])]),_:1}),p(a,null,{default:f(()=>[i("button",{class:"cyber-button",disabled:!Ie.success||_e.value,onClick:t[2]||(t[2]=$((...e)=>y(Ge)&&y(Ge)(...e),["prevent"]))},[i("span",de,[_e.value?(_(),o("span",ue,[...t[10]||(t[10]=[L("登录中",-1),i("span",null,".",-1),i("span",null,".",-1),i("span",null,".",-1)])])):(_(),o(c,{key:1},[L("登录")],64))])],8,ce)]),_:1})]),_:1},8,["model","onKeyup"])])])])}}}),[["__scopeId","data-v-5e62431b"]]);export{ve as default};
